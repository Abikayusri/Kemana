= Kemana REST API DOC
Kemana REST API documentation
:toc: left
:toclevels: 3
:sectlinks:
:sectnums:
:sectanchors:

== User

=== User Object
|===
| param | type |desc

| `id`
| string
| Optional, generated in backend

| `name`
| string
| Name

| `email`
| string
| Email

| `phone`
| string
| Number phone

| `photo`
| string
| Photo url

| `position`
| object
| Object of `position`

| `driver_attribute`
| object
| Object of `driver_attribute`, ignore if object type `passenger`

|===

===== Sample User Object
[source]
----
{
    "id": "1281d0ac-7a74-3b91-950f-f52a02862cda",
    "name": "marjuki",
    "email": "email@marjuki.com",
    "phone": "0812983029",
    "photo": "http://example.jpg",
    "position": {
      "lat": -6.2242497,
      "lon": 106.9240669
    },
    "driver_attribute": {
      "num": "B 8773 A",
      "type": "HONDA",
      "color": "white"
    }
}
----

// save user //
=== Save User
Save user to document

===== Sample Request
include::{snippets}/user/save-user/http-request.adoc[]

|===
| param | type | desc

| `document`
| parameter
| Document where user saving, `driver`, `passenger` or `driver_active`

| `user`
| body / `Content-Type: application/json`
| Put your user object json in body

|===

===== Sample Response
include::{snippets}/user/save-user/http-response.adoc[]
// end save user //

// edit user //
=== Edit User
Save user to document

===== Sample Request
include::{snippets}/user/edit-user/http-request.adoc[]

|===
| param | desc

| `document`
| Document where user saved

| `id`
| Id of user

|===

===== Sample Response
include::{snippets}/user/edit-user/http-response.adoc[]
// end edit user //

// delete user //
=== Delete User
Save user to document

===== Sample Request
include::{snippets}/user/delete-user/http-request.adoc[]

===== Sample Response
include::{snippets}/user/delete-user/http-response.adoc[]
// end edit user //

== Places

=== Place Object
|===
| param | type |desc

| `id`
| string
| Id for place object

| `place_name`
| string
| Place name

|===

===== Sample Object
[source]
----
{
    "id" : "360qquh9-5262f23aac2c4a8c90b5c126b88302f5",
    "place_name" : "Universitas Muhammadiyah Prof Dr Hamka (Uhamka)",
    "address_name" : "Jalan Delima 1 Gang 3, Duren Sawit 13460",
    "geometry" : [
        -6.21939,
        106.92863
    ]
}
----

// search place //
=== Search Place
Search place by nearby from your location

===== Sample Request
include::{snippets}/place/search-place/http-request.adoc[]

|===
| param | desc

| `q`
| Query for search location

| `from`
| Latitude and longitude where you can search (bounding box)

| `apikey`
| Api key from HERE MAPS API

|===

===== Sample Response
include::{snippets}/place/search-place/http-response.adoc[]
// end search place //

// get current place //
=== Get Current Place
Get Current Place from your location

===== Sample Request
include::{snippets}/place/get-current-place/http-request.adoc[]
|===
| param | desc

| `from`
| Latitude and longitude where you can search (bounding box)

| `apikey`
| Api key from HERE MAPS API

|===

===== Sample Response
include::{snippets}/place/get-current-place/http-response.adoc[]
// end get current place //

== Direction

=== Direction Object
|===
| param | type |desc

| `distance`
| double
| distance between two location

| `geometry`
| string
| geometry string encoded for polyline

|===

===== Sample Direction Object
[source]
----
{
  "distance" : 15427.7,
  "geometry" : "`kud@uf`kSyC_@yJ]wF^qHyQR{A|BcA}CcNSsB}FsOOyAfXiErKyAvl@qIz_@aRvm@mXlU_V~P{Pv`A{YxDwFzH_V}@gs@_DmqAyD}Wv@kvAxLapBpZj@~@gS{E]JsBWAZ}ES?"
}

----

// get direction //
=== Get Direction Between Two Location

===== Sample Request
include::{snippets}/direction/get-direction/http-request.adoc[]
|===
| param | desc

| `from`
| Latitude and longitude start location

| `to`
| Latitude and longitude end location

| `token`
| Mapbox Token

|===

===== Sample Response
include::{snippets}/direction/get-direction/http-response.adoc[]
// end get direction //

== Order

==== Order Object
|===
| param | type |desc

| `id`
| string
| Optional, generated in backend

| `time`
| long
| time millis

| `driver_id`
| string
| `id` of driver

| `passenger_id`
| string
| `id` of passenger

| `from`
| object
| object of `place` where your start

| `to`
| object
| object of `place` where your destination

| `distance`
| double
| distance between two location

|===

===== Sample Order Object
[source]
----
{
    "id" : "ccbfe33f-8839-30eb-9fd8-8f96e05adb47",
    "time" : 1577216969037,
    "driver_id" : "drv_id",
    "passenger_id" : "pasg_id",
    "from" : {
      "id" : "NT_Cd95J1IADx9t-xa6WdzQnB_xQD",
      "place_name" : null,
      "address_name" : null,
      "geometry" : [ -6.21939, 106.92863 ]
    },
    "to" : {
      "id" : "360qquh9-5262f23aac2c4a8c90b5c126b88302f5",
      "place_name" : null,
      "address_name" : null,
      "geometry" : [ -6.21939, 106.92863 ]
    },
    "distance" : 320123.0
}
----

// save order //
=== Save Order Data

===== Sample Request
include::{snippets}/order/save-order/http-request.adoc[]

|===
| param | desc

| `body`
| Order object

| `to`
| Latitude and longitude end location

| `token`
| Mapbox Token

|===

===== Sample Response
include::{snippets}/order/save-order/http-response.adoc[]
// end save order //

// save order //
=== Get Order Data

===== Sample Request
include::{snippets}/order/get-order/http-request.adoc[]

|===
| param | desc

| `id`
| `id` of order object

|===

===== Sample Response
include::{snippets}/order/get-order/http-response.adoc[]
// end save order //

// delete order //
=== Get Order Data

===== Sample Request
include::{snippets}/order/delete-order/http-request.adoc[]

|===
| param | desc

| `id`
| `id` of order object

|===

===== Sample Response
include::{snippets}/order/delete-order/http-response.adoc[]
// end delete order //